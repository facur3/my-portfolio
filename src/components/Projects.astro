---
import { Image } from "astro:assets";
import GitHub from "./icons/GitHub.astro";
import Link from "./icons/Link.astro";
import HTML from "./icons/HTML.astro";
import CSS from "./icons/CSS.astro";
import JavaScript from "./icons/JavaScript.astro";
import Python from "./icons/Python.astro";
import Java from "./icons/Java.astro";
import Terminal from "./icons/Terminal.astro";

import personalPortfolioImg from "../assets/images/personal-portfolio.png";
import javaAstarImg from "../assets/images/java-astar.png";
import prospectingImg from "../assets/images/prospecting-calculator.png";
import fifteenPuzzleImg from "../assets/images/fifteen-puzzle.png";
import plagioImg from "../assets/images/plagio.jpg";
import firstWebsiteImg from "../assets/images/first-website.png";

const TAGS = {
    HTML: {
        name: "HTML",
        class: "bg-[#E34F26]/10 text-[#E34F26] border border-[#E34F26]/20",
        icon: HTML,
    },
    CSS: {
        name: "CSS",
        class: "bg-[#1572B6]/10 text-[#1572B6] border border-[#1572B6]/20",
        icon: CSS,
    },
    JAVASCRIPT: {
        name: "JavaScript",
        class: "bg-[#F7DF1E]/10 text-[#F7DF1E] border border-[#F7DF1E]/20",
        icon: JavaScript,
    },
    PYTHON: {
        name: "Python",
        class: "bg-[#3776AB]/10 text-[#3776AB] border border-[#3776AB]/20",
        icon: Python,
    },
    SASS: {
        name: "Sass",
        class: "bg-[#CC6699]/10 text-[#CC6699] border border-[#CC6699]/20",
        icon: null,
    },
    NLP: {
        name: "NLP / AI",
        class: "bg-[#34D399]/10 text-[#34D399] border border-[#34D399]/20 font-bold",
        icon: null,
    },
    ALGORITHMS: {
        name: "Algoritmos",
        class: "bg-red-500/10 text-red-500 border border-red-500/20",
        icon: null,
    },
    RESPONSIVENESS: {
        name: "Responsive Design",
        class: "bg-[#8B5CF6]/10 text-[#8B5CF6] border border-[#8B5CF6]/20",
        icon: null,
    },
    GAMEDEVELOPMENT: {
        name: "Game Dev",
        class: "bg-[#EF4444]/10 text-[#EF4444] border border-[#EF4444]/20",
        icon: null,
    },
};

const PROJECTS = [
    {
        title: "Sistema de Navegación Autónoma (Java A*)",
        description:
            "Simulador de tráfico urbano (inspirado en GTA) desarrollado en Java. Implementa el algoritmo de búsqueda A* (A-Star) con heurística Manhattan sobre grafos ponderados para el cálculo óptimo de rutas en tiempo real. Arquitectura robusta con patrones de diseño, persistencia de datos y testing unitario con JUnit 5.",
        image: javaAstarImg,
        github: "https://github.com/facur3/tpg-2c2025-recursivos",
        tags: [
            {
                name: "Java / JavaFX",
                class: "bg-orange-900/30 text-orange-200 border-orange-800",
                icon: Java,
            },
            {
                name: "Algoritmos & Grafos",
                class: "bg-zinc-800 text-zinc-300 border-zinc-700",
                icon: Terminal,
            },
            {
                name: "Maven & JUnit",
                class: "bg-blue-900/30 text-blue-200 border-blue-800",
                icon: null,
            },
        ],
        featured: true,
    },
    {
        title: "Data Scraper & Probabilistic Calculator",
        description:
            "Herramienta de ingeniería de datos y automatización para análisis económico. Backend en Python que utiliza BeautifulSoup y expresiones regulares (Regex) avanzadas para extraer, limpiar y normalizar miles de registros de datos web en tiempo real. Frontend reactivo para el cálculo estadístico de probabilidades.",
        image: prospectingImg,
        demo: "https://prospecting-calculator.vercel.app/",
        github: "https://github.com/facur3/prospecting-calculator",
        tags: [
            {
                name: "Python",
                class: "bg-blue-900/30 text-blue-200 border-blue-800",
                icon: Python,
            },
            {
                name: "Automatización / Scraping",
                class: "bg-emerald-900/30 text-emerald-200 border-emerald-800",
                icon: Terminal,
            },
            {
                name: "Data Processing (Regex)",
                class: "bg-purple-900/30 text-purple-200 border-purple-800",
                icon: null,
            },
        ],
        featured: true,
    },
    {
        title: "Portfolio Personal",
        description:
            "Portfolio profesional con diseño moderno y responsivo, optimizado para todas las plataformas. Incluye animaciones fluidas, tema claro/oscuro automático y arquitectura escalable.",
        image: personalPortfolioImg,
        github: "https://github.com/facur3/Portafolio",
        demo: "https://facur3.github.io/Portafolio/",
        tags: [TAGS.HTML, TAGS.RESPONSIVENESS],
        featured: true,
    },
    {
        title: "Juego Fifteen Puzzle",
        description:
            "Implementación del clásico rompecabezas con mecánicas de juego optimizadas. Lógica compleja en Vanilla JS.",
        image: fifteenPuzzleImg,
        github: "https://github.com/facur3/Fifteen",
        demo: "https://facur3.github.io/Fifteen/",
        tags: [TAGS.JAVASCRIPT, TAGS.GAMEDEVELOPMENT],
        featured: true,
    },
    {
        title: "Detector de Plagio",
        description:
            "Sistema avanzado de detección de plagio utilizando procesamiento de lenguaje natural (NLP) para comparar documentos y calcular similitud semántica con alta precisión.",
        image: plagioImg,
        github: "https://github.com/facur3/plagios",
        tags: [TAGS.PYTHON, TAGS.NLP],
        featured: false,
    },
    {
        title: "Landing Page Corporativa",
        description:
            "Sitio web comercial desarrollado con arquitectura CSS modular y metodologías BEM. Enfoque en SEO, rendimiento y experiencia de usuario fluida.",
        image: firstWebsiteImg,
        github: "https://github.com/facur3/PFRossi",
        demo: "https://facur3.github.io/PFRossi/",
        tags: [TAGS.HTML, TAGS.SASS],
        featured: false,
    },
];
---

<section id="projects" class="w-full flex flex-col justify-center h-full">
    <div class="w-full max-w-7xl mx-auto px-4">
        <!-- Compact Grid: 6 items fit in 2 rows -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {
                PROJECTS.map(
                    ({ image, title, description, tags, demo, github }) => (
                        <article class="group relative flex flex-col bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl overflow-hidden hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-300 shadow-sm">
                            {/* Compact Image Section */}
                            <div class="relative w-full h-32 overflow-hidden bg-zinc-100 dark:bg-zinc-800">
                                <Image
                                    src={image}
                                    alt={title}
                                    class="object-cover w-full h-full transition-transform duration-700 group-hover:scale-105"
                                    loading="lazy"
                                />

                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" />

                                <div class="absolute top-2 right-2 flex gap-2 translate-y-[-10px] opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300">
                                    {github && (
                                        <a
                                            href={github}
                                            target="_blank"
                                            class="p-1.5 bg-white/90 dark:bg-zinc-900/90 backdrop-blur border border-zinc-200 dark:border-zinc-700 rounded-full text-zinc-700 dark:text-zinc-300 hover:text-black dark:hover:text-white transition-all"
                                            aria-label="View Source"
                                        >
                                            <GitHub class="size-3" />
                                        </a>
                                    )}
                                    {demo && (
                                        <a
                                            href={demo}
                                            target="_blank"
                                            class="p-1.5 bg-white/90 dark:bg-zinc-900/90 backdrop-blur border border-zinc-200 dark:border-zinc-700 rounded-full text-zinc-700 dark:text-zinc-300 hover:text-black dark:hover:text-white transition-all"
                                            aria-label="View Demo"
                                        >
                                            <Link class="size-3" />
                                        </a>
                                    )}
                                </div>
                            </div>

                            {/* Dense Content Section */}
                            <div class="flex flex-col flex-grow p-4">
                                <div class="mb-2">
                                    <h3 class="text-base font-bold text-zinc-900 dark:text-white mb-1 truncate">
                                        {title}
                                    </h3>
                                    <p class="text-xs text-zinc-700 dark:text-zinc-400 leading-snug line-clamp-2">
                                        {description}
                                    </p>
                                </div>

                                <div class="mt-auto flex flex-wrap gap-1.5">
                                    {tags.slice(0, 3).map((tag) => (
                                        <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-medium bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 border border-zinc-200 dark:border-zinc-700">
                                            {tag.icon && (
                                                <tag.icon class="size-2.5 mr-1" />
                                            )}
                                            {tag.name}
                                        </span>
                                    ))}
                                </div>
                            </div>
                        </article>
                    ),
                )
            }
        </div>

        <!-- Small View All Button -->
        <div class="flex justify-center mt-6">
            <a
                href="https://github.com/facur3?tab=repositories"
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-2 px-4 py-2 text-xs font-semibold text-white bg-zinc-900 hover:bg-zinc-800 rounded-full transition-all duration-300 shadow hover:shadow-md"
            >
                Ver más en GitHub
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-3 h-3"
                    viewBox="0 0 24 24"
                    stroke-width="2"
                    stroke="currentColor"
                    fill="none"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    ><path stroke="none" d="M0 0h24v24H0z" fill="none"
                    ></path><path d="M17 7l-10 10"></path><path d="M8 7l9 0l0 9"
                    ></path></svg
                >
            </a>
        </div>
    </div>
</section>
